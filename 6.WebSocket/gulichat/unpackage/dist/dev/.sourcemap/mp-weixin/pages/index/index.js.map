{"version":3,"sources":["webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/main.js","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?1391","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?f7b6","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?5867","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?fe3f","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?2d85","webpack:///C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue?60c8"],"names":["createPage","Page","dayTime","Date","toLocaleDateString","getTime","components","uniIcons","uniSwipeAction","uniSwipeActionItem","data","posRight","messageList","userInfo","uni","getStorageSync","currentToken","onLoad","$API","reqMessageList","result","forEach","item","chatType","chatName","nameFilter","userFace","avatarUrlFilter","mapWebSocket","onUnload","closeSocket","methods","value","replace","nickName","avatarUrl","toDetail","navigateTo","url","chatToken","connectSocket","header","token","protocols","onSocketOpen","console","log","onSocketError","onSocketMessage","JSON","parse","$bus","$emit","onSocketClose","filters","timeFilter","format"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4b4e09da&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4b4e09da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b4e09da\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4b4e09da', component.options)\n    } else {\n      api.reload('4b4e09da', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=4b4e09da&scoped=true&\", function () {\n      api.rerender('4b4e09da', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"C:/Users/CHH/Desktop/SZ210521/6.WebSocket/gulichat/pages/index/index.vue\"\nexport default component.exports","export * from \"-!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=4b4e09da&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.messageList, function(item, __i0__) {\n    var f0 = _vm._f(\"timeFilter\")(item.lastModify)\n\n    return {\n      $orig: _vm.__get_orig(item),\n      f0: f0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport uniIcons from '@/components/uni-icons/uni-icons.vue'\r\nimport uniSwipeAction from '@/components/uni-swipe-action/uni-swipe-action.vue'\r\nimport uniSwipeActionItem from '@/components/uni-swipe-action-item/uni-swipe-action-item.vue'\r\n\r\nimport moment from 'moment';\r\n\r\nlet dayTime=new Date(new Date(new Date().toLocaleDateString()).getTime());\r\nexport default{\r\n\tcomponents: { uniIcons,uniSwipeAction,uniSwipeActionItem },\r\n\tdata(){\r\n\t\treturn {\r\n\t\t\tposRight: '15px',\r\n\t\t\tmessageList:[],\r\n\t\t\tuserInfo:uni.getStorageSync('userInfo'),\r\n\t\t\tcurrentToken:null\r\n\t\t}\r\n\t},\r\n\tasync onLoad(){\r\n\t\tconst result = await this.$API.reqMessageList()\r\n\t\tresult.forEach((item)=>{\r\n\t\t\tif(item.chatType === \"single\"){\r\n\t\t\t\titem.chatName = this.nameFilter(item.chatName);\r\n\t\t\t\titem.userFace = this.avatarUrlFilter(item.userFace)\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.messageList= result;\r\n\t\t// console.log(result)\r\n\t\tthis.mapWebSocket();\r\n\t},\r\n\tonUnload(){\r\n\t\tuni.closeSocket();\r\n\t},\r\n\tmethods:{\r\n\t\tnameFilter(value){\r\n\t\t\treturn value.replace(this.userInfo.nickName,\"\").replace(\"<->\",\"\")\r\n\t\t},\r\n\t\tavatarUrlFilter(avatarUrl){\r\n\t\t\treturn avatarUrl.replace(this.userInfo.avatarUrl,\"\").replace(\"<->\",\"\")\r\n\t\t},\r\n\t\ttoDetail(item){\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"/pages/groupChat/groupChat?chatToken=\"+item.chatToken\r\n\t\t\t})\r\n\t\t\tthis.currentToken = item.chatToken;\r\n\t\t},\r\n\t\tmapWebSocket(){\r\n\t\t\tuni.connectSocket({\r\n\t\t\t\turl:\"ws://localhost:3000\",\r\n\t\t\t\theader:{\r\n\t\t\t\t\ttoken:uni.getStorageSync('token')\r\n\t\t\t\t},\r\n\t\t\t\tprotocols:[\"echo-protocol\"]\r\n\t\t\t})\r\n\t\t\tuni.onSocketOpen(()=>{\r\n\t\t\t\tconsole.log('Open success')\r\n\t\t\t})\r\n\t\t\tuni.onSocketError(()=>{\r\n\t\t\t\tconsole.log('Error success')\r\n\t\t\t})\r\n\t\t\tuni.onSocketMessage(({data})=>{\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t// console.log('Message success',data)\r\n\t\t\t\tif(data.chatToken === this.currentToken){\r\n\t\t\t\t\tthis.$bus.$emit('sendMsg',data.data);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tuni.onSocketClose(()=>{\r\n\t\t\t\tconsole.log('Close success')\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tfilters:{\r\n\t\ttimeFilter(value){\r\n\t\t\treturn moment(value).format(\"hh:mm\")\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=4b4e09da&lang=scss&scoped=true&\"; export default mod; export * from \"-!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!F:\\\\devtool\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=4b4e09da&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}