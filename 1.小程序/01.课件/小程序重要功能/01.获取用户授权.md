# 小程序用户授权

1. 截至到2021年10月19日,一共出现过三种用户授权方案
2. 首次登录授权:
   1. 早期
   2. 中期(使用时间最长的版本,到21年4月份才开始废弃)
      1. 需要使用到的组件:button
      2. 流程:
         1. 给button组件添加标签属性open-type="getUserInfo"
         2. 给button组件绑定事件,事件名称:getuserinfo
         3. 可以通过回调函数的形参,获取到用户的个人信息res.detail.userInfo
         4. 将该数据更新到data中
         5. 在模版中将该数据进行动态展示
   3. 最新
3. 二次登陆免授权(**静默登录**)
   1. 需求:当用户进入该项目的时候,自动获取到用户的授权信息,并展示在页面上
   2. 拆解:
      1. 当用户进入该项目的时候
         1. 绑定事件监听(生命周期函数)
      2. 自动获取到用户的授权信息
         1. 使用js获取到用户授权信息
         2. API:wx.getUserInfo(Object object)
      3. 展示在页面上
         1. 将该数据更新到data中
   3. 注意:wx.getUserInfo方法必须在用户经过了首次登录授权流程之后,才能使用,否则无效
