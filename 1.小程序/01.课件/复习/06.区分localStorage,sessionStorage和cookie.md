# 区分localStorage,sessionStorage和cookie

1. 生命周期
   1. cookie
      1. 设置最大超时时间Max-Age,只要不通过代码删除或者手动删除,cookie的数据就会被保留
      2. 不设置最大超时时间Max-Age,只要当前标签页或者浏览器关闭,cookie的数据就会被销毁
      3. 注意:如果没设置最大超时时间,这种cookie叫做会话级cookie
   2. localStorage
      1. 只要不通过代码删除或者手动删除,那么localStorage中的数据将永久保留
   3. sessionStorage
      1. 只要当前标签页或者浏览器关闭,那么sessionStorage中的数据就会被销毁
2. 存储位置
   1. cookie
      1. 设置最大超时时间Max-Age,存储在硬盘中
      2. 不设置最大超时时间Max-Age,存储在内存中
   2. localStorage
      1. 存储在硬盘中
   3. sessionStorage
      1. 存储在内存中
3. 存储大小
   1. cookie->4KB
   2. localStorage->5MB,在IE上,存储大小只有3MB不到
   3. sessionStorage->5MB
4. 与服务器的关系
   1. cookie(服务器借用的本地存储)
      1. **服务器创建,浏览器存储**
      2. **服务器传递给浏览器,是通过响应头中的set-Cookie属性传递过来**
      3. **浏览器传递给服务器,是通过请求头中的Cookie属性传递过去**
   2. localStorage
      1. 与服务器不熟
   3. sessionStorage
      1. 与服务器不熟
5. 三者之间的对比
   1. cookie(服务器借用的本地存储)
      1. 每次发送请求,都会自动携带
         1. 虽然方便,但是每次请求都会带上Cookie,变相的增加了请求的大小
      2. 服务器可以控制Cookie的读取和写入,很可能导致Cookie在前端无法使用
      3. 用户可以禁用Cookie,很可能导致前端业务逻辑出错
   2. localStorage
      1. 是否携带都由前端开发者决定
      2. 服务器无法控制他
      3. 用户无法禁用或者清空他
   3. sessionStorage
      1. 是否携带都由前端开发者决定
      2. 服务器无法控制他
      3. 用户无法禁用或者清空他
6. 面试题:如何实现多个标签页之间的通信
   1. 统一称呼
      1. 需要传递数据的页面(简称A页面)
      2. 需要接收数据的页面(简称B页面)
   2. 通过localStorage可以实现
      1. 先给需要接受数据的页面(简称B页面)的window对象绑定storage事件
      2. 在需要传递数据的页面(简称A页面),通过window.localStorage.setItem将数据存入localStorage中,此时B页面就会触发storage事件
      3. 在storage事件的回调函数中,可以读取到对应的key值和value数据
      4. 注意:localStorage只能作用于当前域名,如果域名不同无法访问
   3. 通过跨域可以实现
      1. A页面通过window.open方法可以打开一个全新的网页,注意此处会返回一个B页面的window对象
      2. B页面可以在自身页面创建全局变量,存入需要传递的数据,同时,B页面还需要设置document.domain属性,将该值设置为与A页面共同的顶级域名
      3. A页面将自身的document.domain属性设置为与B页面共同的顶级域名
      4. A页面可以通过window.open时候返回的window对象,就可以访问B页面的全局变量
