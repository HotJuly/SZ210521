# 跨域相关

1. 问题一:什么是跨域
   1. **违反了浏览器同源策略**
   2. 如果当前的网页来源和请求的数据来源不是同一个服务器,那么就是跨域
   3. 什么是同源策略?
      1. **如果两个 URL 的 protocol(协议)、port(端口号)和 host(域名或者IP地址) 都相同的话，则这两个 URL 是同源**
   4. 为什么要有同源策略?
      1. **如果协议名不受约束,那么网页可以直接请求当前用户电脑本地文件,发送至服务器上**
      2. **如果域名不受约束,那么网页就可以趁用户不注意,后台通过js发送ajax请求,请求其他无关网站,同时自动携带Cookie,最终导致用户数据泄露**
2. 问题二:跨域一定会报错吗
   1. 不一定
   2. 服务器之间不会出现跨域问题
   3. link,script,img,video,audio等标签引用其他服务器的资源都不会出现跨域问题
3. 问题三:什么情况下会出现跨域问题
   1. 浏览器上会出现跨域问题
   2. 只有发送ajax请求的时候才会出现跨域问题
   3. 总结:跨域问题是浏览器搞的鬼
4. 问题四:哪些请求算是ajax请求(async javascript and xml)
   1. 只有通过js发送的请求才是ajax请求
   2. 其实ajax不是一种请求类型,他只是一种发送请求的技术
   3. **我们是通过ajax技术向服务器发送http请求**
   4. 平常简单说法:发一个ajax请求
   5. 完整说法:使用ajax技术发送一个http请求
5. 跨域解决方案
   1. jsonp
      1. 原理:script标签请求服务器资源,不会报跨域错误
      2. 流程:
         1. 浏览器创建全局变量data,全局函数getData,给按钮绑定点击事件
         2. 事件回调函数中,创建script标签,并给script标签添加src,最终将script标签插入至页面上
         3. script标签会发送http请求到服务器,服务器根据传递过来的函数名称,配合服务器需要返回的数据,组合得到返回的文本内容
         4. script标签会将服务器返回的文本内容作为js代码执行
   2. cors(跨源资源共享)
      1. 原理:
         1. 跨域问题是浏览器搞的鬼
         2. 跨域问题是在响应阶段才会出现
      2. 流程:
         1. 只需要服务器在返回相响应数据的时候,给响应报文的响应头中添加属性Access-Control-Allow-Origin:"*"
   3. proxy
   4. nginx

