# 小程序数据绑定

1. C(create 添加)
   1. Vue
      1. 在配置对象中创建data属性,属性值必须是个函数,该函数返回一个对象
      2. **面试题:为什么data属性值不能是一个对象?**
         1. **如果data属性值是一个对象,会导致该对象被多个组件引用,当其中一个组件修改了该对象的数据,会导致引用当前对象的所有组件都发生变化,所以将data写为工厂函数的形式,每次调用data函数都可以得到一个全新的对象,实现data数据的私有化**
   2. React
      1. 在class中创建state属性,属性值为对象即可
   3. 小程序
      1. **在配置对象中创建data属性,属性值为对象即可**
      2. **面试题:为什么小程序不需要像Vue那样,必须是一个函数**
         1. **小程序会将data对象使用JSON实现深拷贝,每次得到的对象都是一个全新对象**
         2. **乞丐版:JSON.parse(JSON.stringify(obj))**
            1. 缺点:
               1. 无法拷贝函数
               2. 无法拷贝特殊类型,例如:Set(会变成Array),Map(会变成Object)
               3. 会失去原型链
2. R(read 读取)
   1. 在模版中读取
      1. Vue
         1. 在模版中,需要使用到data中的数据时,可以使用插值语法({{msg}})
         2. 除了Vue指令之外,其他地方都要添加插值语法
      2. React
         1. 在render函数中,需要使用到state中的数据时,可以使用{this.state.msg}即可
      3. 小程序
         1. 与Vue相同
         2. **只要在模版中想使用data中的数据,一定要加插值语法**
   2. 在js代码中读取
      1. Vue
         1. 读取语法:this.msg
         2. 流程:this.msg->经过数据代理->this.$data.msg->经过数据劫持->得到对应属性的value值
      2. React
         1. 读取语法:this.state.msg
      3. 小程序
         1. 读取语法:this.data.msg
         2. **注意:小程序没有数据代理**
3. U(update 更新)
   1. Vue
      1. 响应式:当属性值发生变化的时候,页面会展示出最新结果
      2. 更新语法:this.msg="我是修改之后的数据" 
      3. 流程:
         1. this.msg="我是修改之后的数据" 
         2. 经过数据代理
         3. this.$data.msg="我是修改之后的数据" 
         4. 经过数据劫持
         5. 触发dep.notify函数通知视图更新
      4. **面试题:Vue更新数据是同步更新还是异步更新?**
         1. **同步更新**
      5. **面试题2:Vue更新视图是同步更新还是异步更新?**
         1. **异步更新(编辑模式切换)**
         2. **需求:当input框显示出来之后,自动获取焦点**
            1. **必须要input框显示出来之后,才调用focus方法获取焦点($nextTick)**
   2. React(状态持久化)
      1. 更新语法:this.setState({msg:"我是修改之后的数据"}) 
      2. 面试题:React更新数据是同步更新还是异步更新?
         1. 既可以是同步,也可以是异步
         2. 同步更新:
            1. 定时器
            2. 原生事件
         3. 异步更新:
            1. 生命周期
            2. 合成事件
               1. 如何区分合成事件和原生事件
                  1. 事件名称小写的就是原生事件,驼峰命名法就是合成事件
               2. 注意:合成事件是捡来的,原生事件是亲儿子
                  1. 因为合成事件利用了事件委派效果,原生事件是直接绑定在当前节点上
   3. 小程序
      1. 更新语法:this.setData({msg:"我是修改之后的数据"})
      2. **小程序没有数据劫持**
      3. **面试题:小程序更新数据是同步还是异步?**
         1. **同步更新**
         2. 总结:**以后只要读取data中的数据,一定能够拿到最新值**
      4. **面试题2:小程序更新视图是同步更新还是异步更新?**
         1. **异步更新**(类似于防抖效果)
   4. 数据流向
      1. Vue
         1. 单向(伪双向)
         2. 双向数据绑定
            1. 原理:当用户修改input框中的内容时,自动修改data中对应的状态数据
               1. 监视用户输入内容
                  1. 通过事件监听,事件名:input
               2. @input="(event)=>msg=event.target.value"
      2. React
         1. 单向
      3. 小程序
         1. 单向
   5. 总结:
      1. **无论是Vue,React还是小程序,更新视图都是异步更新**

